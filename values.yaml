# Global configuration
global:
  registry: ""
  imageTag: "v1.0.0"
  imagePullPolicy: Never
  environment: "development"

# Tenant API Configuration (Single Version)
tenantApi:
  name: tenant-api
  image: demodeck-tenant-api
  tag: "v1.0.0"
  port: 5121
  replicaCount: 2
  host: "tenant-api.demodeck.local"
  resources:
    requests:
      memory: "512Mi"
      cpu: "300m"
    limits:
      memory: "1Gi"
      cpu: "600m"
  livenessProbe:
    path: /health
    port: 5121
    initialDelaySeconds: 30
    periodSeconds: 10
  readinessProbe:
    path: /health
    port: 5121
    initialDelaySeconds: 5
    periodSeconds: 5
  env:
    ASPNETCORE_ENVIRONMENT: "Development"
    ASPNETCORE_URLS: "http://+:5121"

# Auth API Configuration (Single Version)
authApi:
  name: auth-api
  image: demodeck-auth-api
  tag: "v1.0.0"
  port: 5001
  replicaCount: 2
  host: "auth-api.demodeck.local"
  resources:
    requests:
      memory: "256Mi"
      cpu: "200m"
    limits:
      memory: "512Mi"
      cpu: "400m"
  livenessProbe:
    path: /health
    port: 5001
    initialDelaySeconds: 30
    periodSeconds: 10
  readinessProbe:
    path: /health
    port: 5001
    initialDelaySeconds: 5
    periodSeconds: 5
  env:
    ASPNETCORE_ENVIRONMENT: "Development"
    ASPNETCORE_URLS: "http://+:5001"
    TenantUrl: "http://tenant-api.demodeck.local/api/tenant/"

# Product API Configuration (Single Version)
productApi:
  name: product-api
  image: demodeck-product-api
  tag: "v1.0.0"
  port: 5002
  replicaCount: 3
  host: "product-api.demodeck.local"
  resources:
    requests:
      memory: "512Mi"
      cpu: "300m"
    limits:
      memory: "1Gi"
      cpu: "600m"
  livenessProbe:
    path: /health
    port: 5002
    initialDelaySeconds: 30
    periodSeconds: 10
  readinessProbe:
    path: /health
    port: 5002
    initialDelaySeconds: 5
    periodSeconds: 5
  env:
    ASPNETCORE_ENVIRONMENT: "Development"
    ASPNETCORE_URLS: "http://+:5002"


# Tenant Registry UI Configuration
tenantRegistryUi:
  name: tenant-registry-ui
  image: demodeck-tenant-registry-ui
  tag: "v1.0.0"
  replicaCount: 2
  port: 80
  host: "tenantregistry.demodeck.local"
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  livenessProbe:
    path: /
    port: 80
    initialDelaySeconds: 30
    periodSeconds: 10
  readinessProbe:
    path: /
    port: 80
    initialDelaySeconds: 5
    periodSeconds: 5
  env:
    VUE_APP_TENANT_API_URL: "http://tenant-api.demodeck.local"

# Tenant-specific UIs (1 instance for now)
tenantUis:
  acme:
    name: acme-ui
    image: demodeck-tenant-ui
    tag: "v1.0.0"
    replicaCount: 1
    port: 80
    host: "acme.demodeck.local"
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "200m"
    env:
      VUE_APP_TENANT_NAME: "acme"
      VUE_APP_AUTH_API_URL: "http://auth-api.demodeck.local"
      VUE_APP_PRODUCT_API_URL: "http://product-api.demodeck.local"

# Ingress Configuration for AGIC
ingress:
  enabled: true
  className: "public"
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
  tls:
    enabled: false
    secretName: demodeck-tls

# Horizontal Pod Autoscaler
autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

# Service Configuration
service:
  type: ClusterIP
  port: 80

# Service Account
serviceAccount:
  create: true
  annotations: {}
  name: ""

# Security
podSecurityContext:
  runAsNonRoot: false
  runAsUser: 0

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: false

# Node selection
nodeSelector: {}
tolerations: []
affinity: {}