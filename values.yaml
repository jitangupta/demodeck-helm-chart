# Global configuration
global:
  registry: "yourregistry.azurecr.io"
  imageTag: "latest"
  imagePullPolicy: IfNotPresent
  environment: "production"

# Tenant API Configuration (Single Version)
tenantApi:
  name: tenant-api
  image: demodeck-tenant-api
  tag: "latest"
  port: 5121
  replicaCount: 2
  host: "tenant-api.demodeck.xyz"
  resources:
    requests:
      memory: "512Mi"
      cpu: "300m"
    limits:
      memory: "1Gi"
      cpu: "600m"
  livenessProbe:
    path: /health
    port: 5121
    initialDelaySeconds: 30
    periodSeconds: 10
  readinessProbe:
    path: /health
    port: 5121
    initialDelaySeconds: 5
    periodSeconds: 5
  env:
    ASPNETCORE_ENVIRONMENT: "Production"
    ASPNETCORE_URLS: "http://+:5121"

# Auth API Configuration (Single Version)
authApi:
  name: auth-api
  image: demodeck-auth-api
  tag: "latest"
  port: 5001
  replicaCount: 2
  host: "auth-api.demodeck.xyz"
  resources:
    requests:
      memory: "256Mi"
      cpu: "200m"
    limits:
      memory: "512Mi"
      cpu: "400m"
  livenessProbe:
    path: /health
    port: 5001
    initialDelaySeconds: 30
    periodSeconds: 10
  readinessProbe:
    path: /health
    port: 5001
    initialDelaySeconds: 5
    periodSeconds: 5
  env:
    ASPNETCORE_ENVIRONMENT: "Production"
    ASPNETCORE_URLS: "http://+:5001"

# Product API Configuration (Single Version)
productApi:
  name: product-api
  image: demodeck-product-api
  tag: "latest"
  port: 5002
  replicaCount: 3
  host: "product-api.demodeck.xyz"
  resources:
    requests:
      memory: "512Mi"
      cpu: "300m"
    limits:
      memory: "1Gi"
      cpu: "600m"
  livenessProbe:
    path: /health
    port: 5002
    initialDelaySeconds: 30
    periodSeconds: 10
  readinessProbe:
    path: /health
    port: 5002
    initialDelaySeconds: 5
    periodSeconds: 5
  env:
    ASPNETCORE_ENVIRONMENT: "Production"
    ASPNETCORE_URLS: "http://+:5002"

# Tenant Registry UI Configuration
tenantRegistryUi:
  name: tenant-registry-ui
  image: demodeck-tenant-registry-ui
  tag: "latest"
  replicaCount: 2
  port: 80
  host: "tenantregistry.demodeck.xyz"
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  livenessProbe:
    path: /
    port: 80
    initialDelaySeconds: 30
    periodSeconds: 10
  readinessProbe:
    path: /
    port: 80
    initialDelaySeconds: 5
    periodSeconds: 5

# Tenant-specific UIs (3 instances)
tenantUis:
  acme:
    name: acme-ui
    image: demodeck-tenant-ui
    tag: "latest"
    replicaCount: 1
    port: 80
    host: "acme.demodeck.xyz"
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "200m"
    env:
      VUE_APP_TENANT_NAME: "acme"
      VUE_APP_AUTH_API_URL: "https://auth-api.demodeck.xyz"
      VUE_APP_PRODUCT_API_URL: "https://product-api.demodeck.xyz"
  globalx:
    name: globalx-ui
    image: demodeck-tenant-ui
    tag: "latest"
    replicaCount: 1
    port: 80
    host: "globalx.demodeck.xyz"
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "200m"
    env:
      VUE_APP_TENANT_NAME: "globalx"
      VUE_APP_AUTH_API_URL: "https://auth-api.demodeck.xyz"
      VUE_APP_PRODUCT_API_URL: "https://product-api.demodeck.xyz"
  initech:
    name: initech-ui
    image: demodeck-tenant-ui
    tag: "latest"
    replicaCount: 1
    port: 80
    host: "initech.demodeck.xyz"
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "200m"
    env:
      VUE_APP_TENANT_NAME: "initech"
      VUE_APP_AUTH_API_URL: "https://auth-api.demodeck.xyz"
      VUE_APP_PRODUCT_API_URL: "https://product-api.demodeck.xyz"

# Ingress Configuration for AGIC
ingress:
  enabled: true
  className: "azure/application-gateway"
  annotations:
    appgw.ingress.kubernetes.io/backend-path-prefix: "/"
    appgw.ingress.kubernetes.io/ssl-redirect: "true"
    appgw.ingress.kubernetes.io/request-timeout: "30"
  tls:
    enabled: true
    secretName: demodeck-tls

# Horizontal Pod Autoscaler
autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

# Service Account
serviceAccount:
  create: true
  annotations: {}
  name: ""

# Security
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: true

# Node selection
nodeSelector: {}
tolerations: []
affinity: {}